"use strict";(self["webpackChunkmy_vue_admin"]=self["webpackChunkmy_vue_admin"]||[]).push([[60],{8481:function(e,t,l){l.r(t),l.d(t,{default:function(){return M}});var a=l(700),i=l(1876),s=l(9318);const n={id:"test",class:"form-container"},o={class:"form-header"},r={key:0,class:"response-container"},d={class:"result-header"},u={class:"tip"},p={class:"result-content"},c={class:"tree-container"},h={class:"tree-node"},f={class:"node-label"},g={class:"content-container"},m={class:"content-header"},b={class:"content-scroll"},k={key:0},F=["innerHTML"],y={key:1},v={class:"api-container"},_={class:"content-header"},C={class:"content-scroll"},L={key:0},D=["innerHTML"],w={key:1};function x(e,t,l,x,U,W){const T=(0,a.g2)("el-button"),V=(0,a.g2)("el-radio"),A=(0,a.g2)("el-radio-group"),E=(0,a.g2)("el-form-item"),O=(0,a.g2)("el-input"),$=(0,a.g2)("Upload"),H=(0,a.g2)("el-icon"),X=(0,a.g2)("el-upload"),I=(0,a.g2)("el-form"),N=(0,a.g2)("el-collapse-transition"),P=(0,a.g2)("el-progress"),j=(0,a.g2)("el-dialog"),M=(0,a.g2)("Bell"),R=(0,a.g2)("Folder"),z=(0,a.g2)("Document"),S=(0,a.g2)("el-tooltip"),q=(0,a.g2)("el-tree");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",o,[(0,a.bF)(T,{type:"text",onClick:W.toggleForm,icon:U.isFormExpanded?"arrow-up":"arrow-down"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(U.isFormExpanded?"收起表单":"展开表单"),1)])),_:1},8,["onClick","icon"])]),(0,a.bF)(N,null,{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(I,{onSubmit:(0,s.D$)(W.submitForm,["prevent"]),"label-width":"120px","label-position":"top",class:"form-content"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{label:"选择提交方式:",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(A,{modelValue:U.submissionType,"onUpdate:modelValue":t[0]||(t[0]=e=>U.submissionType=e),class:"radio-group"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"text"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("输入文本")]))),_:1}),(0,a.bF)(V,{label:"file"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("上传文件")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),"text"===U.submissionType?((0,a.uX)(),(0,a.Wv)(E,{key:0,label:"请输入内容:",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(O,{type:"textarea",modelValue:U.inputData,"onUpdate:modelValue":t[1]||(t[1]=e=>U.inputData=e),placeholder:"请输入内容...",rows:"4",resize:"both"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),"file"===U.submissionType?((0,a.uX)(),(0,a.Wv)(E,{key:1,label:"上传文件:",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(X,{class:"upload-demo",action:"","before-upload":W.beforeUpload,"file-list":U.fileList,multiple:"","on-remove":W.handleRemove,"on-change":W.handleChange,"auto-upload":!1,drag:""},{tip:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"el-upload__tip"}," 支持压缩文件（.zip）和代码文件（.java, .py, .c, .js 等）。 ",-1)]))),default:(0,a.k6)((()=>[(0,a.bF)(H,{class:"upload-icon"},{default:(0,a.k6)((()=>[(0,a.bF)($)])),_:1}),t[10]||(t[10]=(0,a.Lk)("div",{class:"upload-text"}," 点击或拖拽文件到此处上传 ",-1))])),_:1},8,["before-upload","file-list","on-remove","on-change"])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(E,{label:"请选择语言:",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(A,{modelValue:U.selectedOption,"onUpdate:modelValue":t[2]||(t[2]=e=>U.selectedOption=e),class:"radio-group"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"C++"},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)("C\\C++")]))),_:1}),(0,a.bF)(V,{label:"JAVA"},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.eW)("JAVA")]))),_:1}),(0,a.bF)(V,{label:"PYTHON"},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)("PYTHON")]))),_:1}),(0,a.bF)(V,{label:"JavaScript"},{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.eW)("JavaScript")]))),_:1}),(0,a.bF)(V,{label:"HTML"},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.eW)("HTML")]))),_:1}),(0,a.bF)(V,{label:"PHP"},{default:(0,a.k6)((()=>t[16]||(t[16]=[(0,a.eW)("PHP")]))),_:1}),(0,a.bF)(V,{label:"GO"},{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.eW)("GO")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(E,{label:"请选择漏洞类型:",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(A,{modelValue:U.additionalOption,"onUpdate:modelValue":t[3]||(t[3]=e=>U.additionalOption=e),class:"radio-group"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"语义错误修复"},{default:(0,a.k6)((()=>t[18]||(t[18]=[(0,a.eW)("语义错误修复")]))),_:1}),(0,a.bF)(V,{label:"语法错误修复"},{default:(0,a.k6)((()=>t[19]||(t[19]=[(0,a.eW)("语法错误修复")]))),_:1}),(0,a.bF)(V,{label:"安全漏洞修复"},{default:(0,a.k6)((()=>t[20]||(t[20]=[(0,a.eW)("安全漏洞修复")]))),_:1}),(0,a.bF)(V,{label:"编程错误修复"},{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.eW)("编程错误修复")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(T,{type:"success","native-type":"submit",loading:U.loading,size:"large"},{default:(0,a.k6)((()=>t[22]||(t[22]=[(0,a.eW)(" 提交 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["onSubmit"]),[[s.aG,U.isFormExpanded]])])),_:1}),(0,a.bF)(j,{modelValue:U.loading,"onUpdate:modelValue":t[4]||(t[4]=e=>U.loading=e),title:"正在处理",width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{default:(0,a.k6)((()=>[(0,a.bF)(P,{percentage:100,status:"success",indeterminate:!0}),t[23]||(t[23]=(0,a.Lk)("span",null,"请稍候...",-1))])),_:1},8,["modelValue"]),U.responseData?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",d,[t[25]||(t[25]=(0,a.Lk)("h3",null,"代码加固结果",-1)),(0,a.Lk)("p",u,[(0,a.bF)(H,{class:"blue-bell"},{default:(0,a.k6)((()=>[(0,a.bF)(M)])),_:1}),t[24]||(t[24]=(0,a.eW)(" 在代码区域时，按住shift+滑动鼠标滚轮，可左右查看结果 "))])]),(0,a.Lk)("div",p,[(0,a.Lk)("div",c,[(0,a.bF)(q,{data:U.treeData,props:U.treeProps,"node-key":"filePath","default-expand-all":"","highlight-current":"",onNodeClick:W.handleNodeClick},{default:(0,a.k6)((({node:e,data:t})=>[(0,a.Lk)("span",h,["1"===t.isdir?((0,a.uX)(),(0,a.Wv)(H,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(R)])),_:1})):((0,a.uX)(),(0,a.Wv)(H,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(z)])),_:1})),(0,a.bF)(S,{content:e.label,placement:"top","hide-after":0},{default:(0,a.k6)((()=>[(0,a.Lk)("span",f,(0,i.v_)(e.label),1)])),_:2},1032,["content"])])])),_:1},8,["data","props","onNodeClick"])]),(0,a.Lk)("div",g,[(0,a.Lk)("div",m,[t[27]||(t[27]=(0,a.Lk)("h4",null,"原文件内容",-1)),(0,a.bF)(T,{type:"primary",size:"small",onClick:t[5]||(t[5]=e=>W.copyContent(U.selectedFile?.fileContent))},{default:(0,a.k6)((()=>t[26]||(t[26]=[(0,a.eW)(" 复制 ")]))),_:1})]),(0,a.Lk)("div",b,[U.selectedFile?((0,a.uX)(),(0,a.CE)("pre",k,[(0,a.Lk)("code",{innerHTML:W.highlightedContent},null,8,F)])):((0,a.uX)(),(0,a.CE)("p",y,"请选择一个文件查看内容。"))])]),(0,a.Lk)("div",v,[(0,a.Lk)("div",_,[t[29]||(t[29]=(0,a.Lk)("h4",null,"大模型返回结果",-1)),(0,a.bF)(T,{type:"primary",size:"small",onClick:t[6]||(t[6]=e=>W.copyContent(U.selectedFile?.fileContent2))},{default:(0,a.k6)((()=>t[28]||(t[28]=[(0,a.eW)(" 复制 ")]))),_:1})]),(0,a.Lk)("div",C,[U.selectedFile?((0,a.uX)(),(0,a.CE)("pre",L,[(0,a.Lk)("code",{innerHTML:W.highlightedContent2},null,8,D)])):((0,a.uX)(),(0,a.CE)("p",w,"请选择一个文件查看大模型返回结果。"))])])])])):(0,a.Q3)("",!0)])}l(8992),l(3949);const U="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var W={randomUUID:U};l(6573),l(8100),l(7936),l(7467),l(4732),l(9577);let T;const V=new Uint8Array(16);function A(){if(!T){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");T=crypto.getRandomValues.bind(crypto)}return T(V)}l(4114);const E=[];for(let R=0;R<256;++R)E.push((R+256).toString(16).slice(1));function O(e,t=0){return(E[e[t+0]]+E[e[t+1]]+E[e[t+2]]+E[e[t+3]]+"-"+E[e[t+4]]+E[e[t+5]]+"-"+E[e[t+6]]+E[e[t+7]]+"-"+E[e[t+8]]+E[e[t+9]]+"-"+E[e[t+10]]+E[e[t+11]]+E[e[t+12]]+E[e[t+13]]+E[e[t+14]]+E[e[t+15]]).toLowerCase()}function $(e,t,l){if(W.randomUUID&&!t&&!e)return W.randomUUID();e=e||{};const a=e.random??e.rng?.()??A();if(a.length<16)throw new Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if(l=l||0,l<0||l+16>t.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[l+e]=a[e];return t}return O(a)}var H=$,X=l(5708),I=l(6234),N=(l(2836),{data(){return{submissionType:"text",inputData:"",selectedOption:"C++",additionalOption:"语义错误修复",responseData:null,loading:!1,fileList:[],selectedFile:null,treeData:[],treeProps:{label:"fileName",children:"children"},isFormExpanded:!0}},computed:{highlightedContent(){if(this.selectedFile&&this.selectedFile.fileContent){if("text"===this.responseData.type)return I.A.highlightAuto(this.selectedFile.fileContent).value;if("file"===this.responseData.type){const e=this.selectedFile.fileName.split(".").pop().toLowerCase(),t=this.getFileLanguage(e);return"plaintext"!==t?I.A.highlight(this.selectedFile.fileContent,{language:t}).value:I.A.highlightAuto(this.selectedFile.fileContent).value}}return""},highlightedContent2(){if(this.selectedFile&&this.selectedFile.fileContent2){let e=this.selectedFile.fileContent2;const t=e.split("\n");if(t[0].trim().startsWith("```")&&t.shift(),t[t.length-1].trim().startsWith("```")&&t.pop(),e=t.join("\n"),"text"===this.responseData.type)return I.A.highlightAuto(e).value;if("file"===this.responseData.type){const t=this.selectedFile.fileName.split(".").pop().toLowerCase(),l=this.getFileLanguage(t);return"plaintext"!==l?I.A.highlight(e,{language:l}).value:I.A.highlightAuto(e).value}}return""}},methods:{getFileLanguage(e){switch(e){case"java":return"java";case"py":return"python";case"c":case"cpp":return"cpp";case"js":return"javascript";case"html":return"html";case"css":return"css";case"php":return"php";case"go":return"go";case"txt":return"plaintext";case"md":return"markdown";default:return"plaintext"}},generateUUID(){return H()},beforeUpload(e){const t=e.size/1024/1024<50;return t||this.$message.error("上传文件大小不能超过 50MB!"),t},handleRemove(e,t){this.fileList=t},handleChange(e,t){this.fileList=t},toggleForm(){this.isFormExpanded=!this.isFormExpanded},async submitForm(){if("text"===this.submissionType&&!this.inputData.trim())return void this.$message.error("请输入内容或上传文件");if("file"===this.submissionType&&0===this.fileList.length)return void this.$message.error("请上传至少一个文件或输入内容");this.loading=!0;const e=this.generateUUID(),t=new FormData;t.append("submissionType",this.submissionType),t.append("option",this.selectedOption),t.append("additionalOption",this.additionalOption),t.append("upload_id",e),"text"===this.submissionType?t.append("input",this.inputData):"file"===this.submissionType&&this.fileList.forEach((e=>{t.append("files[]",e.raw)}));try{await X.A.post("api/upload.php",t,{headers:{"Content-Type":"multipart/form-data"}});const e=await X.A.post("api/security.php",t,{headers:{"Content-Type":"multipart/form-data"}});e&&"success"===e.status?(this.responseData=e.data,this.treeData=e.data.files,console.log("type:",this.responseData.type),this.inputData="",this.fileList=[],this.isFormExpanded=!1):(console.error("接口返回格式错误:",e),this.$message.error("提交失败：接口未返回有效数据"))}catch(l){console.error("提交失败:",l),this.$message.error(`提交失败：${l.message||"未知错误"}`)}finally{this.loading=!1}},handleNodeClick(e){console.log("点击的节点数据:",e),"0"===e.isdir?this.selectedFile=e:this.selectedFile=null},copyContent(e){navigator.clipboard.writeText(e).then((()=>{this.$message.success("内容已复制到剪贴板")})).catch((()=>{this.$message.error("复制失败")}))}}}),P=l(5253);const j=(0,P.A)(N,[["render",x],["__scopeId","data-v-15715c92"]]);var M=j}}]);
//# sourceMappingURL=60.0f678bf1.js.map