"use strict";(self["webpackChunkmy_vue_admin"]=self["webpackChunkmy_vue_admin"]||[]).push([[126],{3126:function(e,s,r){r.r(s),r.d(s,{default:function(){return f}});var o=r(700);const a={class:"login-container"},l={class:"system-header"},t=["src"],n={class:"button-group"};function m(e,s,r,m,u,i){const c=(0,o.g2)("User"),d=(0,o.g2)("el-icon"),g=(0,o.g2)("el-input"),p=(0,o.g2)("el-form-item"),f=(0,o.g2)("Lock"),k=(0,o.g2)("el-button"),b=(0,o.g2)("el-form");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",l,[(0,o.Lk)("img",{src:u.logo,alt:"Logo",class:"system-logo"},null,8,t),s[2]||(s[2]=(0,o.Lk)("h2",{class:"system-name"},"代码智能加固系统",-1))]),(0,o.bF)(b,{model:u.form,rules:u.rules,ref:"loginForm","label-width":"0px",class:"login-form"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{prop:"username"},{default:(0,o.k6)((()=>[(0,o.bF)(g,{modelValue:u.form.username,"onUpdate:modelValue":s[0]||(s[0]=e=>u.form.username=e),placeholder:"请输入用户名",clearable:""},{prefix:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(c)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.bF)(p,{prop:"password"},{default:(0,o.k6)((()=>[(0,o.bF)(g,{modelValue:u.form.password,"onUpdate:modelValue":s[1]||(s[1]=e=>u.form.password=e),placeholder:"请输入密码","show-password":"",clearable:""},{prefix:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(f)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",n,[(0,o.bF)(k,{type:"primary",onClick:i.submitForm,class:"login-btn"},{default:(0,o.k6)((()=>s[3]||(s[3]=[(0,o.eW)("登录")]))),_:1},8,["onClick"]),(0,o.bF)(k,{onClick:i.resetForm,class:"reset-btn"},{default:(0,o.k6)((()=>s[4]||(s[4]=[(0,o.eW)("重置")]))),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])}r(4114);var u=r(6927),i=r(7021),c=r(5708),d={components:{User:i.User,Lock:i.Lock},data(){return{logo:r(2871),form:{username:"",password:""},message:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:15,message:"用户名长度在 3 到 15 个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为 6 个字符",trigger:"blur"}]}}},methods:{async submitForm(){this.$refs.loginForm.validate((async e=>{if(!e)return u.nk.error("请完整填写表单");try{const e=await c.A.post("api/login.php",this.form);if(console.log("Response data:",e),"success"===e.status){const s=e.token,r=e.userid,o=e.username;localStorage.setItem("auth_token",s),localStorage.setItem("Userid",r),localStorage.setItem("username",o),u.nk.success("登录成功，即将跳转..."),setTimeout((()=>{this.$router.push("/home")}),1e3)}else this.message=e.message||"未知错误",u.nk.error(this.message)}catch(s){console.error("Login request error:",s),s.response&&s.response.data?this.message=s.response.data.message||"未知错误":this.message="登录请求失败，请检查网络或联系管理员。",u.nk.error(this.message)}}))},resetForm(){this.$refs.loginForm.resetFields(),this.message=""}}},g=r(5253);const p=(0,g.A)(d,[["render",m],["__scopeId","data-v-0811d214"]]);var f=p},2871:function(e,s,r){e.exports=r.p+"img/logo2.34027c81.jpg"}}]);
//# sourceMappingURL=126.7bc19312.js.map